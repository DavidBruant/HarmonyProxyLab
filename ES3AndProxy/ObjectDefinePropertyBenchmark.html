<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <script>
        "use strict";
        var native = {
            Object: {
                defineProperty : Object.defineProperty,
                getOwnPropertyDescriptor: Object.getOwnPropertyDescriptor
            }
        };
    </script>

    <script src="../benchmark.js/benchmark.js"></script>
    <script type="text/javascript" src="ES5ObjectModelEmul.js"> </script>

    <script>
        (function(){
            "use strict";

            var nativeObject = native.Object;

            var o1 = {};
            var o2 = new Object();

            var PROP_NAME = 'azerty';
            var i = 0;

            var desc = {
                value: 37,
                enumerable: true,
                configurable: true,
                writable: true
            };

            function nativeBackAndForth(){
                nativeObject.defineProperty(o1, PROP_NAME, desc);
                nativeObject.getOwnPropertyDescriptor(o1, PROP_NAME);
            }

            function emulatedBackAndForth(){
                Object.defineProperty(o2, PROP_NAME, desc);
                Object.getOwnPropertyDescriptor(o2, PROP_NAME);
            }

            var suite = new Benchmark.Suite();

            suite.add('native', nativeBackAndForth)
            .add('emulated', emulatedBackAndForth)
            .on('cycle', function(){
                // console.log('cycle');
                i = 0;
            })
            .on('complete', function() {
                console.log('Results');
                this.forEach(function(res){
                    console.log(res.name, res.count);
                });
            })
            .run()

        })();
    </script>


    <title> Object.defineProperty Benchmark </title>

</head>

<body>
</html>
